{"remainingRequest":"D:\\专高二\\vue\\demo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\专高二\\vue\\demo\\src\\components\\content\\treeselect\\treeSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\专高二\\vue\\demo\\src\\components\\content\\treeselect\\treeSelect.vue","mtime":1631926045482},{"path":"D:\\专高二\\vue\\demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\专高二\\vue\\demo\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZWwtdHJlZS1zZWxlY3QiLAogIHByb3BzOnsKICAgIC8qIOmFjee9rumhuSAqLwogICAgcHJvcHM6ewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6KCk9PnsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6J2lkJywgICAgICAgICAgICAgLy8gSUTlrZfmrrXlkI0KICAgICAgICAgIGxhYmVsOiAndGl0bGUnLCAgICAgICAgIC8vIOaYvuekuuWQjeensAogICAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicgICAgLy8g5a2Q57qn5a2X5q615ZCNCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLyog6YCJ6aG55YiX6KGo5pWw5o2uKOagkeW9oue7k+aehOeahOWvueixoeaVsOe7hCkgKi8KICAgIG9wdGlvbnM6ewogICAgICB0eXBlOiBBcnJheSwgICAgICAgCiAgICAgIGRlZmF1bHQ6ICgpPT57IHJldHVybiBbXSB9CiAgICB9LAogICAgLyog5Yid5aeL5YC8ICovCiAgICB2YWx1ZTp7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogKCk9PnsgcmV0dXJuIG51bGwgfQogICAgfSwKICAgIC8qIOWPr+a4heepuumAiemhuSAqLwogICAgY2xlYXJhYmxlOnsKICAgICAgdHlwZTpCb29sZWFuLAogICAgICBkZWZhdWx0OigpPT57IHJldHVybiB0cnVlIH0KICAgIH0sCiAgICAvKiDoh6rliqjmlLbotbcgKi8KICAgIGFjY29yZGlvbjp7CiAgICAgIHR5cGU6Qm9vbGVhbiwKICAgICAgZGVmYXVsdDooKT0+eyByZXR1cm4gZmFsc2UgfQogICAgfSwKICAgIHBsYWNlaG9sZGVyOnsKICAgICAgdHlwZTpTdHJpbmcsCiAgICAgIGRlZmF1bHQ6KCk9PntyZXR1cm4gIuajgOe0ouWFs+mUruWtlyJ9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsdGVyVGV4dDogJycsCiAgICAgIHZhbHVlSWQ6dGhpcy52YWx1ZSwgICAgLy8g5Yid5aeL5YC8CiAgICAgIHZhbHVlVGl0bGU6JycsCiAgICAgIGRlZmF1bHRFeHBhbmRlZEtleTpbXSAgICAKICAgIH0KICB9LAogIG1vdW50ZWQoKXsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICB0aGlzLmluaXRIYW5kbGUoKQogICAgfSwgMzAwMCk7CiAgICAKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIneWni+WMluWAvAogICAgaW5pdEhhbmRsZSgpewogICAgICBpZih0aGlzLnZhbHVlSWQpewogICAgICAgIHRoaXMudmFsdWVUaXRsZSA9IHRoaXMuJHJlZnMuc2VsZWN0VHJlZS5nZXROb2RlKHRoaXMudmFsdWVJZCkuZGF0YVt0aGlzLnByb3BzLmxhYmVsXSAgICAgLy8g5Yid5aeL5YyW5pi+56S6CiAgICAgICAgdGhpcy4kcmVmcy5zZWxlY3RUcmVlLnNldEN1cnJlbnRLZXkodGhpcy52YWx1ZUlkKSAgICAgICAvLyDorr7nva7pu5jorqTpgInkuK0KICAgICAgICB0aGlzLmRlZmF1bHRFeHBhbmRlZEtleSA9IFt0aGlzLnZhbHVlSWRdICAgICAgLy8g6K6+572u6buY6K6k5bGV5byACiAgICAgIH0gCiAgICAgIHRoaXMuaW5pdFNjcm9sbCgpCiAgICB9LAogICAgLy8g5Yid5aeL5YyW5rua5Yqo5p2hCiAgICBpbml0U2Nyb2xsKCl7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpPT57CiAgICAgICAgbGV0IHNjcm9sbFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWwtc2Nyb2xsYmFyIC5lbC1zZWxlY3QtZHJvcGRvd25fX3dyYXAnKVswXQogICAgICAgIGxldCBzY3JvbGxCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWwtc2Nyb2xsYmFyIC5lbC1zY3JvbGxiYXJfX2JhcicpCiAgICAgICAgc2Nyb2xsV3JhcC5zdHlsZS5jc3NUZXh0ID0gJ21hcmdpbjogMHB4OyBtYXgtaGVpZ2h0OiBub25lOyBvdmVyZmxvdzogaGlkZGVuOycKICAgICAgICBzY3JvbGxCYXIuZm9yRWFjaChlbGUgPT4gZWxlLnN0eWxlLndpZHRoID0gMCkKICAgICAgfSkKICAgIH0sCiAgICAvLyDliIfmjaLpgInpobkKICAgIGhhbmRsZU5vZGVDbGljayhub2RlKXsKICAgICAgdGhpcy52YWx1ZVRpdGxlID0gbm9kZVt0aGlzLnByb3BzLmxhYmVsXQogICAgICB0aGlzLnZhbHVlSWQgPSBub2RlW3RoaXMucHJvcHMudmFsdWVdCiAgICAgIHRoaXMuJGVtaXQoJ2dldFZhbHVlJyx0aGlzLnZhbHVlSWQpCiAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5ID0gW10KICAgIH0sCiAgICAvLyDmuIXpmaTpgInkuK0KICAgIGNsZWFySGFuZGxlKCl7CiAgICAgIHRoaXMudmFsdWVUaXRsZSA9ICcnCiAgICAgIHRoaXMudmFsdWVJZCA9IG51bGwKICAgICAgdGhpcy5kZWZhdWx0RXhwYW5kZWRLZXkgPSBbXQogICAgICB0aGlzLmNsZWFyU2VsZWN0ZWQoKQogICAgICB0aGlzLiRlbWl0KCdnZXRWYWx1ZScsbnVsbCkKICAgIH0sCiAgICAvKiDmuIXnqbrpgInkuK3moLflvI8gKi8KICAgIGNsZWFyU2VsZWN0ZWQoKXsKICAgICAgbGV0IGFsbE5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjdHJlZS1vcHRpb24gLmVsLXRyZWUtbm9kZScpCiAgICAgIGFsbE5vZGUuZm9yRWFjaCgoZWxlbWVudCk9PmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtY3VycmVudCcpKQogICAgfSwKICAgIGZpbHRlck5vZGUodmFsdWUsIGRhdGEpIHsKICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIHRydWU7CiAgICAgIHJldHVybiBkYXRhLm5hbWUuaW5kZXhPZih2YWx1ZSkgIT09IC0xOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlKCl7CiAgICAgIHRoaXMudmFsdWVJZCA9IHRoaXMudmFsdWUKICAgICAgdGhpcy5pbml0SGFuZGxlKCkKICAgIH0sCiAgICBmaWx0ZXJUZXh0KHZhbCkgewogICAgICB0aGlzLiRyZWZzLnNlbGVjdFRyZWUuZmlsdGVyKHZhbCk7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["treeSelect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"treeSelect.vue","sourceRoot":"src/components/content/treeselect","sourcesContent":["<template>\n  <el-select :value=\"valueTitle\" :clearable=\"clearable\" @clear=\"clearHandle\">\n    <el-input\n      class=\"selectInput\"\n      :placeholder=\"placeholder\"\n      v-model=\"filterText\">\n    </el-input>\n\n    <el-option :value=\"valueTitle\" :label=\"valueTitle\" class=\"options\">\n      <el-tree  id=\"tree-option\"\n        ref=\"selectTree\"\n        :accordion=\"accordion\"\n        :data=\"options\"\n        :props=\"props\"\n        :node-key=\"props.value\"    \n        :default-expanded-keys=\"defaultExpandedKey\"\n        :filter-node-method=\"filterNode\"\n        @node-click=\"handleNodeClick\">\n      </el-tree>\n    </el-option>\n  </el-select>\n</template>\n\n<script>\nexport default {\n  name: \"el-tree-select\",\n  props:{\n    /* 配置项 */\n    props:{\n      type: Object,\n      default:()=>{\n        return {\n          value:'id',             // ID字段名\n          label: 'title',         // 显示名称\n          children: 'children'    // 子级字段名\n        }\n      }\n    },\n    /* 选项列表数据(树形结构的对象数组) */\n    options:{\n      type: Array,       \n      default: ()=>{ return [] }\n    },\n    /* 初始值 */\n    value:{\n      type: Number,\n      default: ()=>{ return null }\n    },\n    /* 可清空选项 */\n    clearable:{\n      type:Boolean,\n      default:()=>{ return true }\n    },\n    /* 自动收起 */\n    accordion:{\n      type:Boolean,\n      default:()=>{ return false }\n    },\n    placeholder:{\n      type:String,\n      default:()=>{return \"检索关键字\"}\n    }\n  },\n  data() {\n    return {\n      filterText: '',\n      valueId:this.value,    // 初始值\n      valueTitle:'',\n      defaultExpandedKey:[]    \n    }\n  },\n  mounted(){\n    setTimeout(() => {\n      this.initHandle()\n    }, 3000);\n    \n  },\n  methods: {\n    // 初始化值\n    initHandle(){\n      if(this.valueId){\n        this.valueTitle = this.$refs.selectTree.getNode(this.valueId).data[this.props.label]     // 初始化显示\n        this.$refs.selectTree.setCurrentKey(this.valueId)       // 设置默认选中\n        this.defaultExpandedKey = [this.valueId]      // 设置默认展开\n      } \n      this.initScroll()\n    },\n    // 初始化滚动条\n    initScroll(){\n      this.$nextTick(()=>{\n        let scrollWrap = document.querySelectorAll('.el-scrollbar .el-select-dropdown__wrap')[0]\n        let scrollBar = document.querySelectorAll('.el-scrollbar .el-scrollbar__bar')\n        scrollWrap.style.cssText = 'margin: 0px; max-height: none; overflow: hidden;'\n        scrollBar.forEach(ele => ele.style.width = 0)\n      })\n    },\n    // 切换选项\n    handleNodeClick(node){\n      this.valueTitle = node[this.props.label]\n      this.valueId = node[this.props.value]\n      this.$emit('getValue',this.valueId)\n      this.defaultExpandedKey = []\n    },\n    // 清除选中\n    clearHandle(){\n      this.valueTitle = ''\n      this.valueId = null\n      this.defaultExpandedKey = []\n      this.clearSelected()\n      this.$emit('getValue',null)\n    },\n    /* 清空选中样式 */\n    clearSelected(){\n      let allNode = document.querySelectorAll('#tree-option .el-tree-node')\n      allNode.forEach((element)=>element.classList.remove('is-current'))\n    },\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.name.indexOf(value) !== -1;\n    }\n  },\n  watch: {\n    value(){\n      this.valueId = this.value\n      this.initHandle()\n    },\n    filterText(val) {\n      this.$refs.selectTree.filter(val);\n    }\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  .el-scrollbar .el-scrollbar__view .el-select-dropdown__item{\n    height: auto;\n    max-height: 274px;\n    padding: 0;\n    overflow: hidden;\n    overflow-y: auto;\n  }\n  .el-select-dropdown__item.selected{\n    font-weight: normal;\n  }\n  ul li >>>.el-tree .el-tree-node__content{\n    height:auto;\n    padding: 0 20px;\n  }\n  .el-tree-node__label{\n    font-weight: normal;\n  }\n  .el-tree >>>.is-current .el-tree-node__label{\n    color: #409EFF;\n    font-weight: 700;\n  }\n  .el-tree >>>.is-current .el-tree-node__children .el-tree-node__label{\n    color:#606266;\n    font-weight: normal;\n  }\n  .selectInput{\n    padding: 0 5px;\n    box-sizing: border-box;\n  }\n\n  /* 开发禁用 */\n  /* .el-tree-node:focus>.el-tree-node__content{\n    background-color:transparent;\n    background-color: #f5f7fa;\n    color: #c0c4cc;\n    cursor: not-allowed;\n  }\n  .el-tree-node__content:hover{\n    background-color: #f5f7fa;\n  } */\n</style>\n"]}]}